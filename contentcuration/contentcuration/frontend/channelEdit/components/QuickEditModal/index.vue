<template>

  <div>
    <EditTitleDescriptionModal
      v-if="isTitleDescriptionOpen"
      :nodeId="nodeIds[0]"
      @close="close"
    />
    <EditLanguageModal
      v-if="isLanguageOpen"
      :nodeIds="nodeIds"
      @close="close"
    />
    <EditResourcesNeededModal
      v-if="isResourcesNeededOpen"
      :nodeIds="nodeIds"
      @close="close"
    />
    <EditCompletionModal
      v-if="isCompletionOpen"
      :nodeId="nodeIds[0]"
      @close="close"
    />
  </div>

</template>


<script>

  import { mapGetters, mapMutations } from 'vuex';
  import { QuickEditModals } from '../../constants';
  import EditLanguageModal from './EditLanguageModal';
  import EditCompletionModal from './EditCompletionModal';
  import EditResourcesNeededModal from './EditResourcesNeededModal';
  import EditTitleDescriptionModal from './EditTitleDescriptionModal';

  export default {
    name: 'QuickEditModal',
    components: {
      EditLanguageModal,
      EditCompletionModal,
      EditResourcesNeededModal,
      EditTitleDescriptionModal,
    },
    computed: {
      ...mapGetters('contentNode', ['getQuickEditModalOpen']),
      openedModal() {
        const quickEditModal = this.getQuickEditModalOpen();
        if (!quickEditModal) {
          return null;
        }
        return quickEditModal.modal;
      },
      nodeIds() {
        const quickEditModal = this.getQuickEditModalOpen();
        if (!quickEditModal) {
          return [];
        }
        return quickEditModal.nodeIds;
      },
      isTitleDescriptionOpen() {
        return this.openedModal === QuickEditModals.TITLE_DESCRIPTION;
      },
      isLanguageOpen() {
        return this.openedModal === QuickEditModals.LANGUAGE;
      },
      isResourcesNeededOpen() {
        return this.openedModal === QuickEditModals.WHAT_IS_NEEDED;
      },
      isCompletionOpen() {
        return this.openedModal === QuickEditModals.COMPLETION;
      },
    },
    methods: {
      ...mapMutations('contentNode', {
        setQuickEditModalOpen: 'SET_QUICK_EDIT_MODAL_OPEN',
      }),
      close() {
        this.setQuickEditModalOpen(null);
      },
    },
  };

</script>


<style lang="scss" scoped>
  
</style>
